(window.webpackJsonp=window.webpackJsonp||[]).push([[102,73,74],{298:function(e,t,s){var a=s(8);e.exports=(a.default||a).template({1:function(e,t,s,a,n){var r=e.lambda,o=e.escapeExpression;return'        <option value="'+o(r(t,t))+'" selected="selected">'+o(r(t,t))+"</option>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,s,a,n){var r,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<select multiple="multiple">\r\n'+(null!=(r=o(s,"each").call(null!=t?t:e.nullContext||{},null!=(r=null!=t?o(t,"attributes"):t)?o(r,"permissions"):r,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n,loc:{start:{line:17,column:4},end:{line:19,column:13}}}))?r:"")+"</select>\r\n"},useData:!0})},304:function(e,t,s){var a=s(8);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,s,a,n){var r=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,l=e.escapeExpression,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="pull-right">\r\n  <button type="button" class="btn btn-xs btn-primary" data-permission="allow">'+l((i(s,"t")||t&&i(t,"t")||o).call(r,"common.form.allow",{name:"t",hash:{},data:n,loc:{start:{line:17,column:79},end:{line:17,column:104}}}))+'</button>\r\n  <button type="button" class="btn btn-xs btn-default" data-permission="deny">'+l((i(s,"t")||t&&i(t,"t")||o).call(r,"common.form.deny",{name:"t",hash:{},data:n,loc:{start:{line:18,column:78},end:{line:18,column:102}}}))+"</button>\r\n</div>\r\n"},useData:!0})},433:function(e,t,s){"use strict";var a=s(2),n=s.n(a),r=s(567),o=s.n(r);o.a.HeaderCell.prototype.render=function(){this.$el.empty();var e,t=this.column;return e=o.a.callByNeed(t.sortable(),t,this.collection)?n()("<a>").text(t.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(t.get("label")),this.$el.append(e),this.$el.attr("data-field",t.get("name")),this.$el.addClass(t.get("direction")),this.delegateEvents(),this},t.a=o.a},434:function(e,t,s){"use strict";s(29),s(30),s(31),s(39),s(101),s(129),s(102),s(22),s(110),s(50),s(15),s(130),s(28),s(26),s(40),s(236),s(569);var a=s(0),n=s.n(a),r=s(2),o=s.n(r),l=s(433);l.a.Extension.ThemeableServerSideFilter=l.a.Extension.ServerSideFilter.extend({events:n.a.extend(l.a.Extension.ServerSideFilter.prototype.events,{"keyup input[type=search]":"keyupSearch"}),keyupSearch:function(e){e.preventDefault(),this.showClearButtonMaybe(e),this.minimumSearchChars&&o()(e.target).val().length>=this.minimumSearchChars&&this.search(e)},className:"form-group has-feedback",template:function(e){var t=e.placeholder?'placeholder="'.concat(e.placeholder,'"'):"",s=e.value?'value="'.concat(e.value,'"'):"";return'<input class="form-control input-sm" type="search" '.concat(t,' name="').concat(e.name,'" ').concat(s,"/>")+"<a class='fa fa-times form-control-feedback' data-backgrid-action='clear' role='button' href='#'></a>"}});l.a.Extension.ThemeableServerSideFilter;var i=s(73),c=s.n(i),u=s(432),d=s.n(u),m=s(86),h=s(23);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f={};f.DatetimeAgoCell=l.a.Cell.extend({className:"date-time-ago-cell",formatter:{fromRaw:function(e){return d()(e).fromNow()}},render:function(){return f.DatetimeAgoCell.__super__.render.apply(this),this.$el.attr("title",d()(this.model.get(this.column.get("name"))).format("Do MMMM YYYY, h:mm:ssa")),this}}),f.ArrayCell=l.a.Cell.extend({className:"array-formatter-cell",buildHtml:function(e){for(var t="<ul>",s=0;s<e.length;s++)n.a.isString(e[s])?t+="<li>".concat(e[s],"</li>"):t+="<li>".concat(JSON.stringify(e[s]),"</li>");return t+="</ul>"},render:function(){this.$el.empty();var e=this.model.get(this.column.attributes.name);return this.$el.append(this.buildHtml(e)),this.delegateEvents(),this}}),f.ObjectCell=l.a.Cell.extend({className:"object-formatter-cell",render:function(){this.$el.empty();var e,t=this.model.get(this.column.attributes.name),s='<dl class="dl-horizontal">';for(e in t)n.a.isString(t[e])?s+="<dt>".concat(e,"</dt><dd>").concat(t[e],"</dd>"):s+="<dt>".concat(e,"</dt><dd>").concat(JSON.stringify(t[e]),"</dd>");return s+="</dl>",this.$el.append(s),this.delegateEvents(),this}}),f.UniversalIdToUsername=l.a.Cell.extend({formatter:{fromRaw:function(e){return e.substring(3,e.indexOf(",ou=user"))}},render:function(){return f.UniversalIdToUsername.__super__.render.apply(this),this.$el.attr("title",this.model.get(this.column.get("name"))),this}}),f.ClickableRow=l.a.Row.extend({events:{click:"onClick",keyup:"onKeyup"},onKeyup:function(e){13===e.keyCode&&this.callback&&this.callback(e)},onClick:function(e){this.callback&&this.callback(e)}}),f.TemplateCell=l.a.Cell.extend({className:"template-cell",render:function(){var e=this.template(this.model);return this.$el.html(e),this.rendered&&this.rendered(),this.delegateEvents(),this}}),f.ClassHeaderCell=l.a.HeaderCell.extend({className:"",render:function(){return f.ClassHeaderCell.__super__.render.apply(this),this.delegateEvents(),this}}),f.UriExtCell=l.a.UriCell.extend({events:{click:"gotoUrl"},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model),s=n.a.isFunction(this.column.get("href"))?this.column.get("href")(e,t,this.model):this.column.get("href");return this.$el.append(o()("<a>",{href:s||e,title:this.title||t}).text(t)),s&&(this.$el.data("href",s),this.$el.prop("title",this.title||t)),this.delegateEvents(),this},gotoUrl:function(e){e.preventDefault();var t=o()(e.currentTarget).data("href");h.a.navigate(t,{trigger:!0})}}),f.FilterHeaderCell=l.a.HeaderCell.extend({className:"filter-header-cell enable-pointer",render:function(){var e=new l.a.Extension.ThemeableServerSideFilter({name:this.column.get("name"),placeholder:o.a.t("common.form.filter"),collection:this.collection});return this.addClassName&&this.$el.addClass(this.addClassName),this.collection.state.filters=this.collection.state.filters?this.collection.state.filters:[],this.collection.state.filters.push(e),f.FilterHeaderCell.__super__.render.apply(this),this.$el.prepend(e.render().el),this}}),f.queryFilter=function(e){void 0===e&&(e={});var t=[],s=e._queryFilter||[],a=e&&e.filterName&&"eq"===e.filterName?function(e,t){return"".concat(e,"+eq+").concat(encodeURIComponent('"*'.concat(t,'*"')))}:function(e,t){return"".concat(e,"+co+").concat(encodeURIComponent('"'.concat(t,'"')))};return n.a.each(this.state.filters,function(e){""!==e.query()&&t.push(a(e.name,e.query()))}),0===(t=t.concat(s)).length||t.join("+AND+")},f.parseState=function(e){return this.state.totalRecords||(this.state.totalRecords=e.remainingPagedResults+e.resultCount),this.state.totalPages||(this.state.totalPages=Math.ceil(this.state.totalRecords/this.state.pageSize)),this.state},f.pagedResultsOffset=function(){return(this.state.currentPage-1)*this.state.pageSize},f.sortKeys=function(){return 1===this.state.order?"-".concat(this.state.sortKey):this.state.sortKey},f.sync=function(e,t,s){var a=[],r=["_pageSize","_pagedResultsOffset","_sortKeys"];return"*"===s.data._queryId&&!0===s.data._queryFilter?r.push("_queryId"):r.push("_queryFilter"),n.a.forIn(s.data,function(e,t){n.a.includes(r,t)&&a.push("".concat(t,"=").concat(e))}),s.data=a.join("&"),s.processData=!1,s.beforeSend||(s.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")}),s.error=function(e){m.a.addMessage({type:m.a.TYPE_DANGER,response:e})},c.a.sync(e,t,s)},f.parseRecords=function(e){return e.result},f.getQueryParams=function(e){return e=e||{},{_sortKeys:this.sortKeys,_queryFilter:function(){return f.queryFilter.call(this,e)},pageSize:"_pageSize",_pagedResultsOffset:this.pagedResultsOffset}},f.doubleSortFix=function(e){var t=e.cid,s=e.collection.filter(function(e){return e.cid!==t});n.a.each(s,function(e){e.set("direction",null)})},f.getState=function(e){var t={pageSize:20,sortKey:"name"};return e&&"object"===p(e)&&n.a.extend(t,e),t};t.a=f},564:function(e,t,s){"use strict";s(39),s(109);var a=s(0),n=s.n(a),r=s(201),o=s(3),l=s(5),i=s(134),c=new r.a("".concat(l.a.host).concat(l.a.context,"/json"));c.getUmaConfig=function(){return c.serviceCall({url:Object(i.a)("/serverinfo/uma"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return o.a.globalData.auth.uma=o.a.globalData.auth.uma||{},o.a.globalData.auth.uma.enabled=e.enabled,o.a.globalData.auth.uma.resharingMode=e.resharingMode,e})},c.unshareAllResources=function(){var e=encodeURIComponent(o.a.loggedUser.get("username"));return c.serviceCall({url:Object(i.a)("/users/".concat(e,"/oauth2/resources/sets?_action=revokeAll")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},c.approveRequest=function(e,t){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=approve")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({scopes:t})})},c.denyRequest=function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=deny")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},c.labels={all:function(){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},create:function(e,t){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_action=create")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({name:e,type:t})})},get:function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(t){return n.a.find(t.result,{_id:e})})},remove:function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels/").concat(encodeURIComponent(e))),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})}},t.a=c},566:function(e,t,s){"use strict";s(109),s(576);var a=s(2),n=s.n(a),r=s(433);r.a.Extension.ThemeablePaginator=r.a.Extension.Paginator.extend({className:"text-center",controls:{rewind:{label:"&laquo;",title:n.a.t("common.grid.pagination.first")},back:{label:"&lsaquo;",title:n.a.t("common.grid.pagination.previous")},forward:{label:"&rsaquo;",title:n.a.t("common.grid.pagination.next")},fastForward:{label:"&raquo;",title:n.a.t("common.grid.pagination.last")}},ulClassName:"pagination",render:function(){return r.a.Extension.Paginator.prototype.render.call(this),this.ulClassName&&this.$el.find("ul").addClass(this.ulClassName),this}});r.a.Extension.ThemeablePaginator},570:function(e,t,s){var a={"./af":436,"./af.js":436,"./ar":437,"./ar-dz":438,"./ar-dz.js":438,"./ar-kw":439,"./ar-kw.js":439,"./ar-ly":440,"./ar-ly.js":440,"./ar-ma":441,"./ar-ma.js":441,"./ar-sa":442,"./ar-sa.js":442,"./ar-tn":443,"./ar-tn.js":443,"./ar.js":437,"./az":444,"./az.js":444,"./be":445,"./be.js":445,"./bg":446,"./bg.js":446,"./bm":447,"./bm.js":447,"./bn":448,"./bn.js":448,"./bo":449,"./bo.js":449,"./br":450,"./br.js":450,"./bs":451,"./bs.js":451,"./ca":452,"./ca.js":452,"./cs":453,"./cs.js":453,"./cv":454,"./cv.js":454,"./cy":455,"./cy.js":455,"./da":456,"./da.js":456,"./de":457,"./de-at":458,"./de-at.js":458,"./de-ch":459,"./de-ch.js":459,"./de.js":457,"./dv":460,"./dv.js":460,"./el":461,"./el.js":461,"./en-SG":462,"./en-SG.js":462,"./en-au":463,"./en-au.js":463,"./en-ca":464,"./en-ca.js":464,"./en-gb":465,"./en-gb.js":465,"./en-ie":466,"./en-ie.js":466,"./en-il":467,"./en-il.js":467,"./en-nz":468,"./en-nz.js":468,"./eo":469,"./eo.js":469,"./es":470,"./es-do":471,"./es-do.js":471,"./es-us":472,"./es-us.js":472,"./es.js":470,"./et":473,"./et.js":473,"./eu":474,"./eu.js":474,"./fa":475,"./fa.js":475,"./fi":476,"./fi.js":476,"./fo":477,"./fo.js":477,"./fr":478,"./fr-ca":479,"./fr-ca.js":479,"./fr-ch":480,"./fr-ch.js":480,"./fr.js":478,"./fy":481,"./fy.js":481,"./ga":482,"./ga.js":482,"./gd":483,"./gd.js":483,"./gl":484,"./gl.js":484,"./gom-latn":485,"./gom-latn.js":485,"./gu":486,"./gu.js":486,"./he":487,"./he.js":487,"./hi":488,"./hi.js":488,"./hr":489,"./hr.js":489,"./hu":490,"./hu.js":490,"./hy-am":491,"./hy-am.js":491,"./id":492,"./id.js":492,"./is":493,"./is.js":493,"./it":494,"./it-ch":495,"./it-ch.js":495,"./it.js":494,"./ja":496,"./ja.js":496,"./jv":497,"./jv.js":497,"./ka":498,"./ka.js":498,"./kk":499,"./kk.js":499,"./km":500,"./km.js":500,"./kn":501,"./kn.js":501,"./ko":502,"./ko.js":502,"./ku":503,"./ku.js":503,"./ky":504,"./ky.js":504,"./lb":505,"./lb.js":505,"./lo":506,"./lo.js":506,"./lt":507,"./lt.js":507,"./lv":508,"./lv.js":508,"./me":509,"./me.js":509,"./mi":510,"./mi.js":510,"./mk":511,"./mk.js":511,"./ml":512,"./ml.js":512,"./mn":513,"./mn.js":513,"./mr":514,"./mr.js":514,"./ms":515,"./ms-my":516,"./ms-my.js":516,"./ms.js":515,"./mt":517,"./mt.js":517,"./my":518,"./my.js":518,"./nb":519,"./nb.js":519,"./ne":520,"./ne.js":520,"./nl":521,"./nl-be":522,"./nl-be.js":522,"./nl.js":521,"./nn":523,"./nn.js":523,"./pa-in":524,"./pa-in.js":524,"./pl":525,"./pl.js":525,"./pt":526,"./pt-br":527,"./pt-br.js":527,"./pt.js":526,"./ro":528,"./ro.js":528,"./ru":529,"./ru.js":529,"./sd":530,"./sd.js":530,"./se":531,"./se.js":531,"./si":532,"./si.js":532,"./sk":533,"./sk.js":533,"./sl":534,"./sl.js":534,"./sq":535,"./sq.js":535,"./sr":536,"./sr-cyrl":537,"./sr-cyrl.js":537,"./sr.js":536,"./ss":538,"./ss.js":538,"./sv":539,"./sv.js":539,"./sw":540,"./sw.js":540,"./ta":541,"./ta.js":541,"./te":542,"./te.js":542,"./tet":543,"./tet.js":543,"./tg":544,"./tg.js":544,"./th":545,"./th.js":545,"./tl-ph":546,"./tl-ph.js":546,"./tlh":547,"./tlh.js":547,"./tr":548,"./tr.js":548,"./tzl":549,"./tzl.js":549,"./tzm":550,"./tzm-latn":551,"./tzm-latn.js":551,"./tzm.js":550,"./ug-cn":552,"./ug-cn.js":552,"./uk":553,"./uk.js":553,"./ur":554,"./ur.js":554,"./uz":555,"./uz-latn":556,"./uz-latn.js":556,"./uz.js":555,"./vi":557,"./vi.js":557,"./x-pseudo":558,"./x-pseudo.js":558,"./yo":559,"./yo.js":559,"./zh-cn":560,"./zh-cn.js":560,"./zh-hk":561,"./zh-hk.js":561,"./zh-tw":562,"./zh-tw.js":562};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=570},586:function(e,t,s){"use strict";s(109),s(571);var a=s(434),n=s(298),r=s.n(n);t.a=a.a.TemplateCell.extend({className:"permissions-cell",template:r.a,onChange:function(){},rendered:function(){this.$el.find("select").selectize({dropdownParent:"body",onChange:this.onChange.bind(this)})}})},668:function(e,t,s){"use strict";s.r(t);s(39),s(109),s(574),s(566);var a=s(2),n=s.n(a),r=s(73),o=s.n(r),l=s(106),i=s(304),c=s.n(i),u=s(433),d=s(434),m=s(3),h=s(5),p=s(134),f=s(586),g=s(564),j=l.a.extend({template:"user/uma/views/request/ListRequestTemplate",render:function(e,t){var s=this,a=o.a.PageableCollection.extend({url:"".concat(h.a.context,"/json").concat(Object(p.a)("/users/".concat(m.a.loggedUser.get("username"),"/uma/pendingrequests"))),state:{pageSize:10,sortKey:"user"},queryParams:{pageSize:"_pageSize",_sortKeys:d.a.sortKeys,_queryId:"*",_queryFilter:"true",_pagedResultsOffset:d.a.pagedResultsOffset},parseState:d.a.parseState,parseRecords:d.a.parseRecords,sync:d.a.sync}),r=[{name:"user",label:n.a.t("uma.requests.grid.header.0"),cell:"string",editable:!1},{name:"resource",label:n.a.t("uma.requests.grid.header.1"),cell:"string",editable:!1},{name:"when",label:n.a.t("uma.requests.grid.header.2"),cell:d.a.DatetimeAgoCell,editable:!1},{name:"permissions",label:n.a.t("uma.requests.grid.header.3"),headerCell:d.a.ClassHeaderCell.extend({className:"col-xs-7 col-md-6"}),cell:f.a.extend({onChange:function(e){this.model.set("permissions",e,{silent:!0});var t=null!==e;this.$el.parent().find("[data-permission=allow]").prop("disabled",!t)}}),editable:!1},{name:"actions",label:"",cell:d.a.TemplateCell.extend({template:c.a,events:{"click button[data-permission=allow]":"allow","click button[data-permission=deny]":"deny"},allow:function(){g.a.approveRequest(this.model.get("_id"),this.model.get("permissions")).then(function(){s.data.requests.fetch({reset:!0,processData:!1})})},deny:function(){g.a.denyRequest(this.model.get("_id")).then(function(){s.data.requests.fetch({reset:!0,processData:!1})})}}),editable:!1}];this.data.requests=new a,this.data.requests.on("backgrid:sort",d.a.doubleSortFix);var l=new u.a.Grid({columns:r,className:"backgrid table",collection:s.data.requests,emptyText:n.a.t("console.common.noResults")}),i=new u.a.Extension.ThemeablePaginator({collection:s.data.requests,windowSize:3});this.parentRender(function(){s.$el.find(".table-container").append(l.render().el),s.$el.find(".panel-body").append(i.render().el),s.data.requests.fetch({reset:!0,processData:!1}).then(function(){t&&t()})})}});t.default=new j}}]);
//# sourceMappingURL=102.b650cbf3a7.js.map