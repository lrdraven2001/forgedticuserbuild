(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{433:function(e,t,a){"use strict";var s=a(2),n=a.n(s),r=a(567),o=a.n(r);o.a.HeaderCell.prototype.render=function(){this.$el.empty();var e,t=this.column;return e=o.a.callByNeed(t.sortable(),t,this.collection)?n()("<a>").text(t.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(t.get("label")),this.$el.append(e),this.$el.attr("data-field",t.get("name")),this.$el.addClass(t.get("direction")),this.delegateEvents(),this},t.a=o.a},434:function(e,t,a){"use strict";a(29),a(30),a(31),a(39),a(101),a(129),a(102),a(22),a(110),a(50),a(15),a(130),a(28),a(26),a(40),a(236),a(569);var s=a(0),n=a.n(s),r=a(2),o=a.n(r),l=a(433);l.a.Extension.ThemeableServerSideFilter=l.a.Extension.ServerSideFilter.extend({events:n.a.extend(l.a.Extension.ServerSideFilter.prototype.events,{"keyup input[type=search]":"keyupSearch"}),keyupSearch:function(e){e.preventDefault(),this.showClearButtonMaybe(e),this.minimumSearchChars&&o()(e.target).val().length>=this.minimumSearchChars&&this.search(e)},className:"form-group has-feedback",template:function(e){var t=e.placeholder?'placeholder="'.concat(e.placeholder,'"'):"",a=e.value?'value="'.concat(e.value,'"'):"";return'<input class="form-control input-sm" type="search" '.concat(t,' name="').concat(e.name,'" ').concat(a,"/>")+"<a class='fa fa-times form-control-feedback' data-backgrid-action='clear' role='button' href='#'></a>"}});l.a.Extension.ThemeableServerSideFilter;var i=a(73),c=a.n(i),u=a(432),d=a.n(u),h=a(86),m=a(23);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f={};f.DatetimeAgoCell=l.a.Cell.extend({className:"date-time-ago-cell",formatter:{fromRaw:function(e){return d()(e).fromNow()}},render:function(){return f.DatetimeAgoCell.__super__.render.apply(this),this.$el.attr("title",d()(this.model.get(this.column.get("name"))).format("Do MMMM YYYY, h:mm:ssa")),this}}),f.ArrayCell=l.a.Cell.extend({className:"array-formatter-cell",buildHtml:function(e){for(var t="<ul>",a=0;a<e.length;a++)n.a.isString(e[a])?t+="<li>".concat(e[a],"</li>"):t+="<li>".concat(JSON.stringify(e[a]),"</li>");return t+="</ul>"},render:function(){this.$el.empty();var e=this.model.get(this.column.attributes.name);return this.$el.append(this.buildHtml(e)),this.delegateEvents(),this}}),f.ObjectCell=l.a.Cell.extend({className:"object-formatter-cell",render:function(){this.$el.empty();var e,t=this.model.get(this.column.attributes.name),a='<dl class="dl-horizontal">';for(e in t)n.a.isString(t[e])?a+="<dt>".concat(e,"</dt><dd>").concat(t[e],"</dd>"):a+="<dt>".concat(e,"</dt><dd>").concat(JSON.stringify(t[e]),"</dd>");return a+="</dl>",this.$el.append(a),this.delegateEvents(),this}}),f.UniversalIdToUsername=l.a.Cell.extend({formatter:{fromRaw:function(e){return e.substring(3,e.indexOf(",ou=user"))}},render:function(){return f.UniversalIdToUsername.__super__.render.apply(this),this.$el.attr("title",this.model.get(this.column.get("name"))),this}}),f.ClickableRow=l.a.Row.extend({events:{click:"onClick",keyup:"onKeyup"},onKeyup:function(e){13===e.keyCode&&this.callback&&this.callback(e)},onClick:function(e){this.callback&&this.callback(e)}}),f.TemplateCell=l.a.Cell.extend({className:"template-cell",render:function(){var e=this.template(this.model);return this.$el.html(e),this.rendered&&this.rendered(),this.delegateEvents(),this}}),f.ClassHeaderCell=l.a.HeaderCell.extend({className:"",render:function(){return f.ClassHeaderCell.__super__.render.apply(this),this.delegateEvents(),this}}),f.UriExtCell=l.a.UriCell.extend({events:{click:"gotoUrl"},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model),a=n.a.isFunction(this.column.get("href"))?this.column.get("href")(e,t,this.model):this.column.get("href");return this.$el.append(o()("<a>",{href:a||e,title:this.title||t}).text(t)),a&&(this.$el.data("href",a),this.$el.prop("title",this.title||t)),this.delegateEvents(),this},gotoUrl:function(e){e.preventDefault();var t=o()(e.currentTarget).data("href");m.a.navigate(t,{trigger:!0})}}),f.FilterHeaderCell=l.a.HeaderCell.extend({className:"filter-header-cell enable-pointer",render:function(){var e=new l.a.Extension.ThemeableServerSideFilter({name:this.column.get("name"),placeholder:o.a.t("common.form.filter"),collection:this.collection});return this.addClassName&&this.$el.addClass(this.addClassName),this.collection.state.filters=this.collection.state.filters?this.collection.state.filters:[],this.collection.state.filters.push(e),f.FilterHeaderCell.__super__.render.apply(this),this.$el.prepend(e.render().el),this}}),f.queryFilter=function(e){void 0===e&&(e={});var t=[],a=e._queryFilter||[],s=e&&e.filterName&&"eq"===e.filterName?function(e,t){return"".concat(e,"+eq+").concat(encodeURIComponent('"*'.concat(t,'*"')))}:function(e,t){return"".concat(e,"+co+").concat(encodeURIComponent('"'.concat(t,'"')))};return n.a.each(this.state.filters,function(e){""!==e.query()&&t.push(s(e.name,e.query()))}),0===(t=t.concat(a)).length||t.join("+AND+")},f.parseState=function(e){return this.state.totalRecords||(this.state.totalRecords=e.remainingPagedResults+e.resultCount),this.state.totalPages||(this.state.totalPages=Math.ceil(this.state.totalRecords/this.state.pageSize)),this.state},f.pagedResultsOffset=function(){return(this.state.currentPage-1)*this.state.pageSize},f.sortKeys=function(){return 1===this.state.order?"-".concat(this.state.sortKey):this.state.sortKey},f.sync=function(e,t,a){var s=[],r=["_pageSize","_pagedResultsOffset","_sortKeys"];return"*"===a.data._queryId&&!0===a.data._queryFilter?r.push("_queryId"):r.push("_queryFilter"),n.a.forIn(a.data,function(e,t){n.a.includes(r,t)&&s.push("".concat(t,"=").concat(e))}),a.data=s.join("&"),a.processData=!1,a.beforeSend||(a.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")}),a.error=function(e){h.a.addMessage({type:h.a.TYPE_DANGER,response:e})},c.a.sync(e,t,a)},f.parseRecords=function(e){return e.result},f.getQueryParams=function(e){return e=e||{},{_sortKeys:this.sortKeys,_queryFilter:function(){return f.queryFilter.call(this,e)},pageSize:"_pageSize",_pagedResultsOffset:this.pagedResultsOffset}},f.doubleSortFix=function(e){var t=e.cid,a=e.collection.filter(function(e){return e.cid!==t});n.a.each(a,function(e){e.set("direction",null)})},f.getState=function(e){var t={pageSize:20,sortKey:"name"};return e&&"object"===p(e)&&n.a.extend(t,e),t};t.a=f},435:function(e,t,a){"use strict";a(50),a(577);var s=a(0),n=a.n(s),r=a(2),o=a.n(r),l=a(73),i=a.n(l);t.a=i.a.RelationalModel.extend({parse:function(e){return n.a.isUrl(e.id)?e=this.resolve(e.id):e.name=e.id,e},resolve:function(e){var t={id:e,name:e};return o.a.ajax({async:!1,dataType:"json",success:function(e){t.name=e.name,t.icon_uri=e.icon_uri},url:e}),t},sync:function(e,t,a){return a.beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")},i.a.Model.prototype.sync.call(this,e,t,a)}})},563:function(e,t,a){"use strict";var s=a(73),n=a.n(s),r=a(435);t.a=n.a.RelationalModel.extend({idAttribute:"subject",relations:[{type:n.a.HasMany,key:"scopes",relatedModel:r.a,includeInJSON:n.a.Model.prototype.idAttribute,parse:!0}],validate:function(e){return e.subject?e.scopes&&e.scopes.length?void 0:"no scopes":"no subject"}})},564:function(e,t,a){"use strict";a(39),a(109);var s=a(0),n=a.n(s),r=a(201),o=a(3),l=a(5),i=a(134),c=new r.a("".concat(l.a.host).concat(l.a.context,"/json"));c.getUmaConfig=function(){return c.serviceCall({url:Object(i.a)("/serverinfo/uma"),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(e){return o.a.globalData.auth.uma=o.a.globalData.auth.uma||{},o.a.globalData.auth.uma.enabled=e.enabled,o.a.globalData.auth.uma.resharingMode=e.resharingMode,e})},c.unshareAllResources=function(){var e=encodeURIComponent(o.a.loggedUser.get("username"));return c.serviceCall({url:Object(i.a)("/users/".concat(e,"/oauth2/resources/sets?_action=revokeAll")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},c.approveRequest=function(e,t){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=approve")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({scopes:t})})},c.denyRequest=function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/uma/pendingrequests/").concat(e,"?_action=deny")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST"})},c.labels={all:function(){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}})},create:function(e,t){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_action=create")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"POST",data:JSON.stringify({name:e,type:t})})},get:function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels?_queryFilter=true")),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"}}).then(function(t){return n.a.find(t.result,{_id:e})})},remove:function(e){return c.serviceCall({url:Object(i.a)("/users/".concat(encodeURIComponent(o.a.loggedUser.get("username")),"/oauth2/resources/labels/").concat(encodeURIComponent(e))),headers:{"Accept-API-Version":"protocol=1.0,resource=1.0"},type:"DELETE"})}},t.a=c},565:function(e,t,a){"use strict";a(39),a(129),a(43),a(130);var s=a(0),n=a.n(s),r=a(2),o=a.n(r),l=a(73),i=a.n(l),c=a(3),u=a(5),d=a(134),h=a(563),m=i.a.RelationalModel.extend({idAttribute:"policyId",toBeCreated:!0,relations:[{type:i.a.HasMany,key:"permissions",relatedModel:h.a}],parse:function(e){return n.a.isEmpty(e.permissions)||(this.toBeCreated=!1),e},sync:function(e,t,a){return(a=a||{}).beforeSend=function(e){e.setRequestHeader("Accept-API-Version","protocol=1.0,resource=1.0")},"update"===e.toLowerCase()&&!0===t.toBeCreated&&(t.toBeCreated=!1,a.headers={},a.headers["If-None-Match"]="*"),t.get("permissions").length||(t.toBeCreated=!0),i.a.Model.prototype.sync.call(this,e,t,a)},urlRoot:"".concat(u.a.host).concat(u.a.context,"/json").concat(Object(d.a)("/users/".concat(c.a.loggedUser.get("username"),"/uma/policies")))}),p=a(435);t.a=i.a.RelationalModel.extend({fetch:function(){var e=o.a.Deferred();return i.a.RelationalModel.prototype.fetch.call(this,{success:function(t){e.resolve(t)},error:function(t,a){e.reject(a)}}),e.promise()},idAttribute:"_id",parse:function(e){return e.policy||(e.policy={},e.policy.permissions=[]),e.policy.policyId=e._id,e.scopes=n.a.map(e.scopes,function(e){return{id:e}}),e},relations:[{type:i.a.HasOne,key:"policy",relatedModel:m,parse:!0},{type:i.a.HasMany,key:"scopes",relatedModel:p.a,includeInJSON:i.a.Model.prototype.idAttribute,parse:!0}],toggleStarred:function(e){n.a.includes(this.get("labels"),e)?this.set("labels",n.a.reject(this.get("labels"),function(t){return t===e})):this.get("labels").push(e)},urlRoot:"".concat(u.a.host).concat(u.a.context,"/json").concat(Object(d.a)("/users/".concat(c.a.loggedUser.get("username"),"/oauth2/resources/sets")))})},566:function(e,t,a){"use strict";a(109),a(576);var s=a(2),n=a.n(s),r=a(433);r.a.Extension.ThemeablePaginator=r.a.Extension.Paginator.extend({className:"text-center",controls:{rewind:{label:"&laquo;",title:n.a.t("common.grid.pagination.first")},back:{label:"&lsaquo;",title:n.a.t("common.grid.pagination.previous")},forward:{label:"&rsaquo;",title:n.a.t("common.grid.pagination.next")},fastForward:{label:"&raquo;",title:n.a.t("common.grid.pagination.last")}},ulClassName:"pagination",render:function(){return r.a.Extension.Paginator.prototype.render.call(this),this.ulClassName&&this.$el.find("ul").addClass(this.ulClassName),this}});r.a.Extension.ThemeablePaginator},568:function(e,t,a){"use strict";a(39),a(109),a(110),a(382),a(50),a(56),a(383),a(571);var s=a(0),n=a.n(s),r=a(2),o=a.n(r),l=a(106),i=a(433),c=a(434),u=a(381),d=a(5),h=a(20),m=(a(129),a(102),a(51),a(40),a(130),a(85),a(74),a(3)),p=a(37),f={decorateURLWithOverrideRealm:function(e){var t,a,s,n=f.getOverrideRealm();if(n){if(-1!==e.indexOf("realm="))return e;-1!==(a=e.indexOf("#"))&&(s=e.slice(a),e=e.slice(0,a)),t=-1===e.indexOf("?")?"?":"&",e="".concat(e).concat(t,"realm=").concat(n),s&&(e+=s)}return e},decorateURIWithRealm:function(e){return e=f.decorateURIWithSubRealm(e),e=f.decorateURLWithOverrideRealm(e)},decorateURIWithSubRealm:function(e){var t=m.a.globalData,a=t&&t.auth?t.auth.subRealm:"",s=a?"".concat(a,"/"):"";return t&&t.auth&&(void 0===t.auth.subRealm||null===t.auth.subRealm)&&console.warn("Unable to decorate URI, Configuration.globalData.auth.subRealm not yet set"),e=e.replace("__subrealm__/",s)},getRealm:function(){var e=f.getOverrideRealm()||f.getSubRealm();return"/"===e.substring(0,1)?e.substring(1):e},getOverrideRealm:function(){var e=p.a.parseQueryString(p.a.getCurrentQueryString()).realm,t=p.a.parseQueryString(p.a.getCurrentFragmentQueryString()).realm;return e||t},getSubRealm:function(){var e,t=p.a.getCurrentFragment().split("/"),a=t.shift().split("&")[0];return e=a&&n.a.includes(["login","passwordReset","continuePasswordReset","register","continueRegister"],a)?"/"===(e=t.join("/").split("&")[0]).slice(-1)?e.slice(0,-1):e:m.a.globalData.auth.subRealm?m.a.globalData.auth.subRealm:""},encodeRealm:function(e){var t=[],a=e.split("/");return n.a.each(a,function(e){""!==e&&t.push(encodeURIComponent(e))}),"/".concat(t.join("/"))}},g=f,b=new(l.a.extend({template:"user/uma/views/share/ShareCounter",element:"#shareCounter",render:function(e,t){this.data.shareCount=e,this.data.shareInfo=this.getShareInfo(e),this.data.shareIcon=this.getShareIcon(e),this.parentRender(function(){t&&t()})},getShareInfo:function(e){var t=e?{count:e}:{context:"none"};return o.a.t("uma.share.info",t)},getShareIcon:function(e){var t="fa fa-lock";return 1===e?t="fa fa-user":e>1&&(t="fa fa-users"),t}})),j=a(563),y=a(435),v=a(565),C=/[?&]realm=/,S=/\/json\/users\/[^/]+\/uma\/policies/,R=/\/json\/users\/[^/]+\/oauth2\/resourcesets/;o.a.ajaxPrefilter(function(e){(S.test(e.url)||R.test(e.url))&&!C.test(e.url)&&g.getOverrideRealm()&&(e.url=g.decorateURLWithOverrideRealm(e.url))});var _=l.a.extend({initialize:function(){this.parentModel=null},template:"user/uma/views/share/CommonShare",events:{"click input#shareButton":"save"},enableOrDisableShareButton:function(){var e=this.$el.find("#selectUser select")[0].selectize.getValue().length>0,t=this.$el.find("#selectPermission select")[0].selectize.getValue().length>0;this.$el.find("input#shareButton").prop("disabled",!(e&&t))},onParentModelError:function(e,t){console.error("Unrecoverable load failure UMAResourceSetWithPolicy. ".concat(t.responseJSON.code," (").concat(t.responseJSON.reason,") ").concat(t.responseJSON.message))},onParentModelSync:function(e){e.get("policy").set("policyId",this.parentModel.id),this.render()},syncParentModel:function(e){var t=!this.parentModel||e&&this.parentModel.id!==e;return t&&(this.stopListening(this.parentModel),this.parentModel=v.a.findOrCreate({_id:e}),this.listenTo(this.parentModel,"sync",this.onParentModelSync),this.listenTo(this.parentModel,"error",this.onParentModelError),this.parentModel.fetch()),t},renderDialog:function(e,t){var a=this,s=o()("<div></div>"),n=e._id||e,r={type:u.a.TYPE_PRIMARY,title:o.a.t("uma.share.shareResource"),size:u.a.SIZE_WIDE,cssClass:"shareDialog",message:s,buttons:[{label:o.a.t("common.form.close"),cssClass:"btn-default",action:function(e){e.close()}}],onshow:function(){a.element=s,a.render(n,t)},onshown:function(){a.renderShareCounter(t)}};this.toBeCreated=e.toBeCreated,this.afterShare=e.share,u.a.show(r)},render:function(e,t){var a=this;if(e instanceof Array&&(e=e[0]),!this.syncParentModel(e)){this.data={},this.data.name=this.parentModel.get("name"),this.data.icon=this.parentModel.get("icon_uri"),this.data.scopes=this.parentModel.get("scopes").toJSON();var s=this.parentModel.get("policy").get("permissions");this.data.permissions=s.toJSON();var n=new i.a.Grid({columns:[{name:"subject",label:o.a.t("uma.resources.show.grid.0"),cell:"string",editable:!1,headerCell:c.a.ClassHeaderCell.extend({className:"col-md-6"})},{name:"scopes",label:o.a.t("uma.resources.show.grid.2"),cell:i.a.Cell.extend({render:function(){var e=this.model.get("scopes").pluck("name").join(", ");return this.$el.empty(),this.$el.append(e),this.delegateEvents(),this}}),editable:!1,headerCell:c.a.ClassHeaderCell.extend({className:"col-md-6"})}],collection:s,emptyText:o.a.t("console.common.noResults"),className:"backgrid table"});this.parentRender(function(){a.renderUserOptions(),a.renderPermissionOptions(),a.renderShareCounter(t),a.$el.find("#advancedView").append(n.render().el),a.$el.find("#umaShareImage img").error(function(){o()(this).parent().addClass("fa-file-image-o no-image")})})}},renderPermissionOptions:function(){var e=this;this.$el.find("#selectPermission select").selectize({plugins:["restore_on_backspace"],delimiter:!1,persist:!1,create:!1,hideSelected:!0,onChange:function(){e.enableOrDisableShareButton()}})},renderUserOptions:function(){var e=this;this.$el.find("#selectUser select").selectize({addPrecedence:!0,create:!0,onChange:function(t){var a,s=e.parentModel.get("policy").get("permissions").findWhere({subject:t}),n=e.$el.find("#selectPermission select");s&&(a=s.get("scopes").pluck("name"),n[0].selectize.focus(),n[0].selectize.setValue(a)),e.enableOrDisableShareButton()}})},reset:function(){this.$el.find("#selectUser select")[0].selectize.clear(),this.$el.find("#selectPermission select")[0].selectize.clear(),this.$el.find("input#shareButton").prop("disabled",!0),this.renderShareCounter()},save:function(){var e=this,t=this.parentModel.get("policy").get("permissions"),a=this.$el.find("#selectUser select")[0].selectize.getValue(),s=n.a.each(this.$el.find("#selectPermission select")[0].selectize.getValue(),function(e){return y.a.find({id:e})}),r=[];n.a.forEach(a,function(e){var a=j.a.findOrCreate({subject:e,scopes:s});t.add(a),r.push(a)});var o=this.parentModel.get("policy");this.toBeCreated&&(o.toBeCreated=this.toBeCreated),o.save().then(function(){h.a.sendEvent(d.a.EVENT_DISPLAY_MESSAGE_REQUEST,"policyCreatedSuccess"),e.reset()},function(e){e.status&&500===e.status&&n.a.forEach(r,function(e){t.remove(e)}),h.a.sendEvent(d.a.EVENT_DISPLAY_MESSAGE_REQUEST,"policyCreatedFail")}).always(function(){e.toBeCreated=!1,e.afterShare&&e.afterShare()})},renderShareCounter:function(e){var t=this.parentModel.get("policy"),a=t?t.get("permissions").length:0;b.render(a,e)}});t.a=_},570:function(e,t,a){var s={"./af":436,"./af.js":436,"./ar":437,"./ar-dz":438,"./ar-dz.js":438,"./ar-kw":439,"./ar-kw.js":439,"./ar-ly":440,"./ar-ly.js":440,"./ar-ma":441,"./ar-ma.js":441,"./ar-sa":442,"./ar-sa.js":442,"./ar-tn":443,"./ar-tn.js":443,"./ar.js":437,"./az":444,"./az.js":444,"./be":445,"./be.js":445,"./bg":446,"./bg.js":446,"./bm":447,"./bm.js":447,"./bn":448,"./bn.js":448,"./bo":449,"./bo.js":449,"./br":450,"./br.js":450,"./bs":451,"./bs.js":451,"./ca":452,"./ca.js":452,"./cs":453,"./cs.js":453,"./cv":454,"./cv.js":454,"./cy":455,"./cy.js":455,"./da":456,"./da.js":456,"./de":457,"./de-at":458,"./de-at.js":458,"./de-ch":459,"./de-ch.js":459,"./de.js":457,"./dv":460,"./dv.js":460,"./el":461,"./el.js":461,"./en-SG":462,"./en-SG.js":462,"./en-au":463,"./en-au.js":463,"./en-ca":464,"./en-ca.js":464,"./en-gb":465,"./en-gb.js":465,"./en-ie":466,"./en-ie.js":466,"./en-il":467,"./en-il.js":467,"./en-nz":468,"./en-nz.js":468,"./eo":469,"./eo.js":469,"./es":470,"./es-do":471,"./es-do.js":471,"./es-us":472,"./es-us.js":472,"./es.js":470,"./et":473,"./et.js":473,"./eu":474,"./eu.js":474,"./fa":475,"./fa.js":475,"./fi":476,"./fi.js":476,"./fo":477,"./fo.js":477,"./fr":478,"./fr-ca":479,"./fr-ca.js":479,"./fr-ch":480,"./fr-ch.js":480,"./fr.js":478,"./fy":481,"./fy.js":481,"./ga":482,"./ga.js":482,"./gd":483,"./gd.js":483,"./gl":484,"./gl.js":484,"./gom-latn":485,"./gom-latn.js":485,"./gu":486,"./gu.js":486,"./he":487,"./he.js":487,"./hi":488,"./hi.js":488,"./hr":489,"./hr.js":489,"./hu":490,"./hu.js":490,"./hy-am":491,"./hy-am.js":491,"./id":492,"./id.js":492,"./is":493,"./is.js":493,"./it":494,"./it-ch":495,"./it-ch.js":495,"./it.js":494,"./ja":496,"./ja.js":496,"./jv":497,"./jv.js":497,"./ka":498,"./ka.js":498,"./kk":499,"./kk.js":499,"./km":500,"./km.js":500,"./kn":501,"./kn.js":501,"./ko":502,"./ko.js":502,"./ku":503,"./ku.js":503,"./ky":504,"./ky.js":504,"./lb":505,"./lb.js":505,"./lo":506,"./lo.js":506,"./lt":507,"./lt.js":507,"./lv":508,"./lv.js":508,"./me":509,"./me.js":509,"./mi":510,"./mi.js":510,"./mk":511,"./mk.js":511,"./ml":512,"./ml.js":512,"./mn":513,"./mn.js":513,"./mr":514,"./mr.js":514,"./ms":515,"./ms-my":516,"./ms-my.js":516,"./ms.js":515,"./mt":517,"./mt.js":517,"./my":518,"./my.js":518,"./nb":519,"./nb.js":519,"./ne":520,"./ne.js":520,"./nl":521,"./nl-be":522,"./nl-be.js":522,"./nl.js":521,"./nn":523,"./nn.js":523,"./pa-in":524,"./pa-in.js":524,"./pl":525,"./pl.js":525,"./pt":526,"./pt-br":527,"./pt-br.js":527,"./pt.js":526,"./ro":528,"./ro.js":528,"./ru":529,"./ru.js":529,"./sd":530,"./sd.js":530,"./se":531,"./se.js":531,"./si":532,"./si.js":532,"./sk":533,"./sk.js":533,"./sl":534,"./sl.js":534,"./sq":535,"./sq.js":535,"./sr":536,"./sr-cyrl":537,"./sr-cyrl.js":537,"./sr.js":536,"./ss":538,"./ss.js":538,"./sv":539,"./sv.js":539,"./sw":540,"./sw.js":540,"./ta":541,"./ta.js":541,"./te":542,"./te.js":542,"./tet":543,"./tet.js":543,"./tg":544,"./tg.js":544,"./th":545,"./th.js":545,"./tl-ph":546,"./tl-ph.js":546,"./tlh":547,"./tlh.js":547,"./tr":548,"./tr.js":548,"./tzl":549,"./tzl.js":549,"./tzm":550,"./tzm-latn":551,"./tzm-latn.js":551,"./tzm.js":550,"./ug-cn":552,"./ug-cn.js":552,"./uk":553,"./uk.js":553,"./ur":554,"./ur.js":554,"./uz":555,"./uz-latn":556,"./uz-latn.js":556,"./uz.js":555,"./vi":557,"./vi.js":557,"./x-pseudo":558,"./x-pseudo.js":558,"./yo":559,"./yo.js":559,"./zh-cn":560,"./zh-cn.js":560,"./zh-hk":561,"./zh-hk.js":561,"./zh-tw":562,"./zh-tw.js":562};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=570},573:function(e,t,a){"use strict";a(39),a(109),a(43),a(574),a(566);var s=a(2),n=a.n(s),r=a(73),o=a.n(r),l=a(106),i=a(433),c=a(434),u=a(568),d=a(3),h=a(5),m=a(134),p=l.a.extend({createCollection:function(e,t){var a=this;return o.a.PageableCollection.extend({url:"".concat(h.a.context,"/json").concat(e),queryParams:c.a.getQueryParams({_sortKeys:c.a.sortKeys,_queryFilter:t,_pagedResultsOffset:c.a.pagedResultsOffset}),state:c.a.getState(),parseState:c.a.parseState,parseRecords:function(e){return e.result.length&&a.recordsPresent(),e.result},sync:c.a.sync})},createLabelCollection:function(e){var t=[];return e&&t.push('labels eq "'.concat(e,'"')),this.createCollection(Object(m.a)("/users/".concat(d.a.loggedUser.get("username"),"/oauth2/resources/sets")),t.map(encodeURIComponent))},createSetCollection:function(e){var t=['resourceOwnerId eq "'.concat(d.a.loggedUser.get("username"),'"')];return e&&(t[0]="! ".concat(t[0])),this.createCollection(Object(m.a)("/users/".concat(d.a.loggedUser.get("username"),"/oauth2/resources/sets")),t.map(encodeURIComponent))},createColumns:function(e){return[{name:"name",label:n.a.t("uma.resources.grid.header.0"),cell:c.a.UriExtCell,headerCell:c.a.FilterHeaderCell,href:function(t,a,s){return"#uma/resources/".concat(e,"/").concat(s.get("_id"))},editable:!1},{name:"resourceServer",label:n.a.t("uma.resources.grid.header.1"),cell:"string",editable:!1,headerCell:c.a.ClassHeaderCell},{name:"type",label:n.a.t("uma.resources.grid.header.2"),cell:"string",headerCell:c.a.ClassHeaderCell,editable:!1},{name:"share",label:n.a.t("uma.resources.grid.header.3"),cell:i.a.Cell.extend({className:"fr-col-btn-1 fa fa-share",events:{click:"share"},share:function(){var e=this;(new u.a).renderDialog({_id:this.model.get("_id"),toBeCreated:this.model.toBeCreated,share:function(){e.model.toBeCreated=!1}})},render:function(){return this.$el.attr({title:n.a.t("uma.share.shareResource")}),this.delegateEvents(),this}}),editable:!1,sortable:!1,headerCell:c.a.ClassHeaderCell}]},recordsPresent:function(){},renderGrid:function(e,t,a){var s=this;this.data.collection=new e,this.data.collection.on("backgrid:sort",c.a.doubleSortFix);var r=new i.a.Grid({columns:t,className:"backgrid table",collection:this.data.collection,emptyText:n.a.t("console.common.noResults")}),o=new i.a.Extension.ThemeablePaginator({collection:this.data.collection,windowSize:3});this.parentRender(function(){s.$el.find(".table-container").append(r.render().el),s.$el.find(".panel-body").append(o.render().el),s.data.collection.fetch({reset:!0,processData:!1}).then(function(){a&&a()})})}});t.a=p},665:function(e,t,a){"use strict";a.r(t);a(109);var s=a(2),n=a.n(s),r=a(573),o=a(381),l=a(5),i=a(20),c=a(23),u=a(564),d=r.a.extend({template:"user/uma/views/resource/MyLabelsPageTemplate",partials:{"uma/_DeleteLabelButton":"uma/_DeleteLabelButton"},events:{"click button#deleteLabel":"deleteLabel"},deleteLabel:function(){var e=this,t=[{label:n.a.t("common.form.cancel"),action:function(e){e.close()}},{id:"ok",label:n.a.t("common.form.ok"),cssClass:"btn-primary btn-danger",action:function(t){t.enableButtons(!1),t.getButton("ok").text(n.a.t("common.form.working")),u.a.labels.remove(e.data.label._id).then(function(){i.a.sendEvent(l.a.EVENT_DISPLAY_MESSAGE_REQUEST,"deleteLabelSuccess"),t.close(),c.a.routeTo(c.a.configuration.routes.umaResourcesMyResources,{trigger:!0,args:[]})},function(){i.a.sendEvent(l.a.EVENT_DISPLAY_MESSAGE_REQUEST,"deleteLabelFail"),t.enableButtons(!0),t.getButton("ok").text(n.a.t("common.form.ok"))})}}];o.a.show({type:o.a.TYPE_DANGER,title:n.a.t("uma.resources.myLabels.deleteLabel.dialog.title"),message:n.a.t("uma.resources.myLabels.deleteLabel.dialog.message"),closable:!1,buttons:t})},recordsPresent:function(){this.$el.find("button#deleteLabel").prop("disabled",!1)},render:function(e,t){var a=e[0],s=this;u.a.labels.get(a).then(function(e){s.data.label=e,e?s.renderGrid(s.createLabelCollection(a),s.createColumns("mylabels/".concat(a)),t):s.parentRender(t)})}});t.default=d}}]);
//# sourceMappingURL=98.56d219b8a1.js.map